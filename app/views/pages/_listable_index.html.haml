- content_for(:title, pretty_model_name) if @set_title

-# This takes care of not displaying the empty sections to users which are not logged in
- if (not empty_section?(pretty_model_name) ) || signed_in?
  .listable-content
    %h2.listable-title
      %span{:onclick => "toggle_section(\"\##{pretty_model_name.tr(' ','_')}-content\",this)"}
        %i.fa.fa-caret-down
      - if signed_in?
        %span#idContentEditable{:contenteditable => "true", :style => "font-size:inherit", :oninput => "alert('Content changed to: '+$(this).html())"}= pretty_model_name
        -# Disable linebreak for contenteditable elements (breaks formatting)
        %script $("#idContentEditable").keypress(function(e){ return e.which != 13; });
      - else
        = pretty_model_name
    %hr
    %div{:id => "#{pretty_model_name.tr(' ','_')}-content"}
      - listable_enum.each do |item|
        .listable-item{:onmouseout => "hide_edit_tools(this)", :onmouseover => "show_edit_tools(this)"}
          = render partial: "#{model_name_for(pretty_model_name)}/item", locals: {item: item}
      - if empty_section?(pretty_model_name)
        .listable-comment
          %b NB
          This section will not be displayed to visitors until you add at least one item.
      %br
      - if signed_in?
        = button_to "Add #{pretty_model_name.singularize}", new_item_path, :class => "btn", :method => :get
